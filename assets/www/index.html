<!DOCTYPE HTML>
<html>
	<head>
		<title>Exercise Tracker</title>
		<link rel="stylesheet"  href="css/jquery.mobile-1.2.0-alpha.1.min.css" />
		
		<script src="js/libs/jquery-1.7.2.min.js"></script>
		<script src="js/libs/jquery.mobile-1.2.0-alpha.min.js"></script>
		<script src="js/libs/knockout-2.0.0.js"></script>
		<script src="js/libs/cordova-2.0.0.js"></script>
		<script src="js/libs/date.format.js"></script>
		<script src="js/libs/localstoragedb.js"></script>
		
		<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyB0h2kuiWc30bAOfu41O6gX941waj23ZfQ&sensor=false"></script>
		
		<script src="js/mylibs/utils.js"></script>
		
		<script src="js/mylibs/data/databaseaccess.js"></script>
		
		<script src="js/mylibs/mappings/statisticsmapping.js"></script>
		<script src="js/mylibs/mappings/workoutmapping.js"></script>
		
		<script src="js/mylibs/data/statisticsrepository.js"></script>
		<script src="js/mylibs/data/workoutrepository.js"></script>
		
		<script src="js/mylibs/eventhandlers/statistics-workout-created-event-handler.js"></script>
		<script src="js/mylibs/eventhandlers/statistics-clear-event-handler.js"></script>
		<script src="js/mylibs/eventhandlers/workout-clear-event-handler.js"></script>
		
		<script src="js/mylibs/models/home.js"></script>
		<script src="js/mylibs/models/workout.js"></script>
		<script src="js/mylibs/models/history.js"></script>
		<script src="js/mylibs/models/workoutinfo.js"></script>
		<script src="js/mylibs/models/settings.js"></script>
	</head>
	<body>
		<!-- Start of Home page -->
		<div data-role="page" id="home">
		
			<div data-role="header">
			
				<h1>Home</h1>
			
				<div data-role="navbar">
					<ul>
						<li><a href="#home" data-transition="slide" data-icon="home" data-theme="b">Home</a></li>
						<li><a href="#tracking" data-transition="slide" data-icon="plus">Record</a></li>
						<li><a href="#history" data-transition="slide" data-icon="star">Rides</a></li>
						<li><a href="#settings" data-transition="slide" data-icon="gear">Settings</a></li>
					</ul>
				</div>
			</div>
		
			<div data-role="content">
				<p>Total Rides: <span data-bind="text: rideCount"></span></p>
				<p>Total Distance Covered: <span data-bind="text: distanceCount"></span>km</p>
			</div>	
		</div>
		
		<!-- Start of Tracking page -->
		<div data-role="page" id="tracking">
			<div data-role="header">
				<h1>Record</h1>
				
				<div data-role="navbar">
					<ul>
						<li><a href="#home" data-transition="slide" data-icon="home">Home</a></li>
						<li><a href="#tracking" data-transition="slide" data-icon="plus" data-theme="b">Record</a></li>
						<li><a href="#history" data-transition="slide" data-icon="star">Rides</a></li>
						<li><a href="#settings" data-transition="slide" data-icon="gear">Settings</a></li>
					</ul>
				</div>
			</div>
		
			<div data-role="content">
				<div data-role="fieldcontain" class="ui-hide-label" data-bind="visible: isTracking() == false">
					<label for="name">Track Name:</label>
					<input type="text" name="name" id="name" data-bind="value: name" placeholder="Track Name"/>
					<div data-bind="foreach: errors">
						<p data-bind="text: value"></p>
					</div>
				</div>
		
				<div data-role="button" data-bind="click: startTracking, visible: isTracking() == false" data-icon="check">Start Tracking</div>
				<div data-role="button" data-bind="click: stopTracking, visible: isTracking" data-icon="delete">Stop Tracking</div>
				
				<div data-bind="visible: isTracking() == true && isWaitingForGPS() == true">
					<p>Currently waiting for GPS...</p>
				</div>
				
				<div id="current-coords" data-bind="visible: isTracking() == true && isWaitingForGPS() == false">
					<p>Name: <span data-bind="text: name"></span></p>
					<p>Distance: <span data-bind="text: distance"></span>km</p>
					<p>Elapsed Time: <span data-bind="text: elapsedTime"></span></p>
					<p>Latitude: <span data-bind="text: latitude"></span></p>
					<p>Longitude: <span data-bind="text: longitude"></span></p>
					
					<a href="#track-popup-map" data-rel="popup" data-role="button" data-transition="pop">Map</a>
					<div data-role="popup" id="track-popup-map" data-overlay-theme="a" data-theme="a" data-corners="false" data-tolerance="15,15">
					    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>			 
					    <div id="track-map-canvas" data-bind="visible: isTracking"></div>
					</div>
				</div>		
			</div>
		</div>
		
		<!-- Start of History page -->
		<div data-role="page" id="history">
		    <div data-role="header">
		        <h1>History</h1>
		        
		        <div data-role="navbar">
					<ul>
						<li><a href="#home" data-transition="slide" data-icon="home">Home</a></li>
						<li><a href="#tracking" data-transition="slide" data-icon="plus">Record</a></li>
						<li><a href="#history" data-transition="slide" data-icon="star" data-theme="b">Rides</a></li>
						<li><a href="#settings" data-transition="slide" data-icon="gear">Settings</a></li>
					</ul>
				</div>
		    </div>
		
		    <div data-role="content">	
		        <p>Recorded Workouts: <span data-bind="text: tracks().length"></span></p>        
		        <ul id="history-tracklist" data-role="listview" data-inset="true" data-bind="foreach: tracks">
		        	<li><a href='#' data-bind="click: function(event) { $parent.raiseDetails($data); }"><span data-bind="text: name"></span></a></li>
		        </ul>
		    </div>
		</div>
		
		<!-- Start of Track Info page -->
		<div data-role="page" id="track-info">
		    <div data-role="header">
		        <h1><span data-bind="text: name"></span> Track Info</h1>
		        
		        <div data-role="navbar">
					<ul>
						<li><a href="#home" data-transition="slide" data-icon="home">Home</a></li>
						<li><a href="#tracking" data-transition="slide" data-icon="plus">Record</a></li>
						<li><a href="#history" data-transition="slide" data-icon="star" data-theme="b">Rides</a></li>
						<li><a href="#settings" data-transition="slide" data-icon="gear">Settings</a></li>
					</ul>
				</div>
		    </div>
		
		    <div data-role="content">	
		    	<p>Distance: <span data-bind="text: distance"></span>km</p>
		    	<p>Start Time: <span data-bind="text: startDateTimeDisplay"></span></p>
		    	<p>End Time: <span data-bind="text: endDateTimeDisplay"></span></p>
		    	<p>Elapsed Time: <span data-bind="text: elapsedTime"></span></p>
		    	
		    	<a href="#track-info-popup-map" data-rel="popup" data-role="button" data-transition="pop" data-bind="visible: isTracking">Map</a>
				<div data-role="popup" id="track-info-popup-map" data-overlay-theme="a" data-theme="a" data-corners="false" data-tolerance="15,15">
					<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
					<div id="track-info-map-canvas" data-bind="visible: hasMap"></div>
				</div>
					
		        <div data-role="button" data-bind="click: deleteItem" data-icon="delete">Delete</div>
		    </div>
		</div>
		
		<!-- Start of Settings page -->
		<div data-role="page" id="settings">
		
			<div data-role="header">
			
				<h1>Settings</h1>
			
				<div data-role="navbar">
					<ul>
						<li><a href="#home" data-transition="slide" data-icon="home">Home</a></li>
						<li><a href="#tracking" data-transition="slide" data-icon="plus">Record</a></li>
						<li><a href="#history" data-transition="slide" data-icon="star">Rides</a></li>
						<li><a href="#settings" data-transition="slide" data-icon="gear" data-theme="b">Settings</a></li>
					</ul>
				</div>
			</div>
		
			<div data-role="content">
				<div data-role="button" data-bind="click: clear">Clear Workouts</div>
			</div>	
		</div>
	</body>
</html>