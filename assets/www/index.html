<!DOCTYPE HTML>
<html>
	<head>
		<title>Exercise Tracker</title>
		<link rel="stylesheet"  href="css/jquery.mobile.css" />
		<link rel="stylesheet"  href="css/site.css" />
		
		<script src="js/libs/jquery.js"></script>
		<script src="js/libs/jquery.mobile.js"></script>
		<script src="js/libs/knockout.js"></script>
		<script src="js/libs/date.format.js"></script>
		<script src="js/libs/localstoragedb.js"></script>
		
		<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyB0h2kuiWc30bAOfu41O6gX941waj23ZfQ&sensor=false"></script>
		
		<script src="js/mylibs/core/extensions/dateextensions.js"></script>
		<script src="js/mylibs/core/helpers/connectionhelper.js"></script>
		<script src="js/mylibs/core/helpers/maphelper.js"></script>
		<script src="js/mylibs/core/helpers/screenhelper.js"></script>
		<script src="js/mylibs/core/helpers/timehelper.js"></script>
		
		<script src="js/mylibs/data/databaseaccess.js"></script>
		
		<script src="js/mylibs/mappings/statisticsdailymapping.js"></script>
		<script src="js/mylibs/mappings/statisticsweeklymapping.js"></script>
		<script src="js/mylibs/mappings/statisticsmonthlymapping.js"></script>
		<script src="js/mylibs/mappings/statisticsyearlymapping.js"></script>
		<script src="js/mylibs/mappings/statisticsoverallmapping.js"></script>
		<script src="js/mylibs/mappings/workoutmapping.js"></script>
		<script src="js/mylibs/mappings/settingsmapping.js"></script>
		
		<script src="js/mylibs/data/statisticsdailyrepository.js"></script>
		<script src="js/mylibs/data/statisticsweeklyrepository.js"></script>
		<script src="js/mylibs/data/statisticsmonthlyrepository.js"></script>
		<script src="js/mylibs/data/statisticsyearlyrepository.js"></script>
		<script src="js/mylibs/data/statisticsoverallrepository.js"></script>
		<script src="js/mylibs/data/workoutrepository.js"></script>
		<script src="js/mylibs/data/settingsrepository.js"></script>
		
		<script src="js/mylibs/eventhandlers/statistics-daily-workout-created-event-handler.js"></script>
		<script src="js/mylibs/eventhandlers/statistics-weekly-workout-created-event-handler.js"></script>
		<script src="js/mylibs/eventhandlers/statistics-monthly-workout-created-event-handler.js"></script>
		<script src="js/mylibs/eventhandlers/statistics-yearly-workout-created-event-handler.js"></script>
		<script src="js/mylibs/eventhandlers/statistics-overall-workout-created-event-handler.js"></script>
		<script src="js/mylibs/eventhandlers/statistics-overall-clear-event-handler.js"></script>
		<script src="js/mylibs/eventhandlers/workout-clear-event-handler.js"></script>
		
		<script src="js/mylibs/models/home.js"></script>
		<script src="js/mylibs/models/workout.js"></script>
		<script src="js/mylibs/models/history.js"></script>
		<script src="js/mylibs/models/workoutinfo.js"></script>
		<script src="js/mylibs/models/settings.js"></script>
	</head>
	<body>
		<!-- Start of Home page -->
		<div data-role="page" id="home">
		
			<div data-role="header">
			
				<h1>Home</h1>
			
				<div data-role="navbar">
					<ul>
						<li><a href="#home" data-transition="slide" data-icon="home" data-theme="b">Home</a></li>
						<li><a href="#tracking" data-transition="slide" data-icon="plus">Record</a></li>
						<li><a href="#history" data-transition="slide" data-icon="star">Rides</a></li>
						<li><a href="#settings" data-transition="slide" data-icon="gear">Settings</a></li>
					</ul>
				</div>
			</div>
		
			<div data-role="content">
				<ul data-role="listview" data-inset="true" >
					<li data-role="list-divider" role="heading">Today</li>
					<li>Total Rides: <span class="ui-li-count" data-bind="text: dailyRideCount"></span></li>
					<li>Total Kilometers Covered: <span class="ui-li-count" data-bind="text: dailyDistanceCount"></span></li>
				</ul>
				
				<ul data-role="listview" data-inset="true" >
					<li data-role="list-divider" role="heading">This Week</li>
					<li>Total Rides: <span class="ui-li-count" data-bind="text: weeklyRideCount"></span></li>
					<li>Total Kilometers Covered: <span class="ui-li-count" data-bind="text: weeklyDistanceCount"></span></li>
				</ul>
				
				<ul data-role="listview" data-inset="true" >
					<li data-role="list-divider" role="heading">This Month</li>
					<li>Total Rides: <span class="ui-li-count" data-bind="text: monthlyRideCount"></span></li>
					<li>Total Kilometers Covered: <span class="ui-li-count" data-bind="text: monthlyDistanceCount"></span></li>
				</ul>
				
				<ul data-role="listview" data-inset="true" >
					<li data-role="list-divider" role="heading">This Year</li>
					<li>Total Rides: <span class="ui-li-count" data-bind="text: yearlyRideCount"></span></li>
					<li>Total Kilometers Covered: <span class="ui-li-count" data-bind="text: yearlyDistanceCount"></span></li>
				</ul>
				
				<ul data-role="listview" data-inset="true" >
					<li data-role="list-divider" role="heading">Overall</li>
					<li>Total Rides: <span class="ui-li-count" data-bind="text: overallRideCount"></span></li>
					<li>Total Kilometers Covered: <span class="ui-li-count" data-bind="text: overallDistanceCount"></span></li>
				</ul>
			</div>	
		</div>
		
		<!-- Start of Tracking page -->
		<div data-role="page" id="tracking">
			<div data-role="header">
				<h1>Record</h1>
				
				<div data-role="navbar">
					<ul>
						<li><a href="#home" data-transition="slide" data-icon="home">Home</a></li>
						<li><a href="#tracking" data-transition="slide" data-icon="plus" data-theme="b">Record</a></li>
						<li><a href="#history" data-transition="slide" data-icon="star">Rides</a></li>
						<li><a href="#settings" data-transition="slide" data-icon="gear">Settings</a></li>
					</ul>
				</div>
			</div>
		
			<div data-role="content">
				<div data-role="fieldcontain" class="ui-hide-label" data-bind="visible: isTracking() == false">
					<label for="name">Track Name:</label>
					<input type="text" name="name" id="name" data-bind="value: name" placeholder="Track Name"/>
					<ul id="track-errors-container" data-role="listview" data-inset="true" data-bind="foreach: errors" data-theme="e">
		        		<li data-icon="alert" data-iconpos="right"><a href="#" data-bind="text: value"></a></li>
		        	</ul>
				</div>
		
				<div data-role="button" data-bind="click: startTracking, visible: isTracking() == false" data-icon="check">Start Tracking</div>
				
				<div data-bind="visible: isTracking() == true && isWaitingForGPS() == true">
					<ul data-role="listview" data-inset="true">
						<li>Currently waiting for GPS...</li>
					</ul>
				</div>
				
				<div id="current-coords" data-bind="visible: isTracking() == true && isWaitingForGPS() == false">
					<ul data-role="listview" data-inset="true">
						<li>Name: <span data-bind="text: name"></span></li>
						<li>Distance: <span data-bind="text: distance"></span>km</li>
						<li>Elapsed Time: <span data-bind="text: elapsedTime"></span></li>
					</ul>
					
					<a href="#track-popup-map" data-rel="popup" data-role="button" data-transition="pop" data-theme="b" data-icon="info" data-bind="visible: hasConnection">Map</a>
					<ul data-role="listview" data-inset="true" data-bind="visible: hasConnection() == false" data-theme="e">
		        		<li data-icon="alert" data-iconpos="right"><a href="#">Must have a connection to view your route as a Google Map...</a></li>
		        	</ul>
					
					<div data-role="popup" id="track-popup-map" data-overlay-theme="a" data-theme="a" data-corners="false" data-tolerance="15,15">
					    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>			 
					    <div id="track-map-canvas" data-bind="visible: isTracking"></div>
					</div>
				</div>
				
				<div data-role="button" data-bind="click: stopTracking, visible: isTracking" data-icon="delete">Stop Tracking</div>	
			</div>
		</div>
		
		<!-- Start of History page -->
		<div data-role="page" id="history">
		    <div data-role="header">
		        <h1>History</h1>
		        
		        <div data-role="navbar">
					<ul>
						<li><a href="#home" data-transition="slide" data-icon="home">Home</a></li>
						<li><a href="#tracking" data-transition="slide" data-icon="plus">Record</a></li>
						<li><a href="#history" data-transition="slide" data-icon="star" data-theme="b">Rides</a></li>
						<li><a href="#settings" data-transition="slide" data-icon="gear">Settings</a></li>
					</ul>
				</div>
		    </div>
		
		    <div data-role="content">
			    <ul data-role="listview" data-inset="true" >
					<li>Recorded Workouts: <span class="ui-li-count" data-bind="text: tracksCount"></span></li>
				</ul>     
		        <ul id="history-tracklist" data-role="listview" data-inset="true" data-bind="foreach: tracks">
		        	<li><a href='#' data-bind="click: function(event) { $parent.raiseDetails($data); }"><span data-bind="text: name"></span></a></li>
		        </ul>
		        
		        <div data-role="controlgroup">
		        	<button id="history-next" data-iconpos="right" data-theme="b" data-icon="arrow-r" data-bind="click: function(event) { page('next'); }">Next</button>
					<button id="history-prev" data-iconpos="left" data-theme="b" data-icon="arrow-l" data-bind="click: function(event) { page('prev'); }">Previous</button>
				</div>
		    </div>
		</div>
		
		<!-- Start of Track Info page -->
		<div data-role="page" id="track-info">
		    <div data-role="header">
		        <h1><span data-bind="text: name"></span> Track Info</h1>
		        
		        <div data-role="navbar">
					<ul>
						<li><a href="#home" data-transition="slide" data-icon="home">Home</a></li>
						<li><a href="#tracking" data-transition="slide" data-icon="plus">Record</a></li>
						<li><a href="#history" data-transition="slide" data-icon="star" data-theme="b">Rides</a></li>
						<li><a href="#settings" data-transition="slide" data-icon="gear">Settings</a></li>
					</ul>
				</div>
		    </div>
		
		    <div data-role="content">	
		    	<ul data-role="listview" data-inset="true" >
					<li>Distance Covered: <span data-bind="text: distance"></span>km</li>
					<li>Start Time: <span data-bind="text: startDateTimeDisplay"></span></li>
					<li>End Time: <span data-bind="text: endDateTimeDisplay"></span></li>
					<li>Elapsed Time: <span data-bind="text: elapsedTime"></span></li>
				</ul>
		    	
		    	<a href="#track-info-popup-map" data-rel="popup" data-role="button" data-transition="pop" data-theme="b" data-icon="info" data-bind="visible: hasConnection">Map</a>
		    	<ul data-role="listview" data-inset="true" data-bind="visible: hasConnection() == false" data-theme="e">
		        	<li data-icon="alert" data-iconpos="right"><a href="#">Must have a connection to view your route as a Google Map...</a></li>
		        </ul>
		        	
				<div data-role="popup" id="track-info-popup-map" data-overlay-theme="a" data-theme="a" data-corners="false" data-tolerance="15,15">
					<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
					<div id="track-info-map-canvas" data-bind="visible: hasMap"></div>
				</div>
					
		        <div data-role="button" data-bind="click: deleteItem" data-icon="delete">Delete</div>
		    </div>
		</div>
		
		<!-- Start of Settings page -->
		<div data-role="page" id="settings">
		
			<div data-role="header">
			
				<h1>Settings</h1>
			
				<div data-role="navbar">
					<ul>
						<li><a href="#home" data-transition="slide" data-icon="home">Home</a></li>
						<li><a href="#tracking" data-transition="slide" data-icon="plus">Record</a></li>
						<li><a href="#history" data-transition="slide" data-icon="star">Rides</a></li>
						<li><a href="#settings" data-transition="slide" data-icon="gear" data-theme="b">Settings</a></li>
					</ul>
				</div>
			</div>
		
			<div data-role="content">
				<label for="settings-sync"><h3>Sync Workouts:</h3></label>
				<select name="settings-sync" id="settings-sync" data-role="slider">
					<option value="off">Off</option>
					<option value="on">On</option>
				</select>
				
				<label for="settings-sync-pictures"><h3>Sync Pictures:</h3></label>
				<select name="settings-sync-pictures" id="settings-sync-pictures" data-role="slider">
					<option value="off">Off</option>
					<option value="on">On</option>
				</select>
				
				<label><h3>Misc:</h3></label>
				<div data-role="button" data-bind="click: clear">Clear Workouts</div>
			</div>	
		</div>
	</body>
</html>